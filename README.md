# DynamoDB Stream Processor

## üî• –û –ø—Ä–æ–µ–∫—Ç–µ  
**DynamoDB Stream Processor** ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏–∑ SQLite —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Apache Kafka.  
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —Ç—Ä–µ–∫–∞ **"–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö"** –≥—Ä–∞–Ω—Ç–æ–≤–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã **Yandex Open Source**.

### **üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ DynamoDB –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.  
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å (`Producer`) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Apache Kafka.  
‚úÖ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å (`Consumer`) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.  
‚úÖ –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` –∏ `config.yaml`.  
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Kafka** ‚Äì –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
- **Zookeeper** ‚Äì –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è Kafka
- **Redis** ‚Äì –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **SQLite** ‚Äì –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è API
- **API (Flask –∏–ª–∏ –¥—Ä—É–≥–æ–π backend)** ‚Äì –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **Kafdrop** ‚Äì UI –¥–ª—è Kafka
- **Kafka UI** ‚Äì –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ Kafka

## üì¶ –°–µ—Ä–≤–∏—Å—ã
- `zookeeper` ‚Äì —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Kafka
- `kafka` ‚Äì –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
- `redis` ‚Äì in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- `api` ‚Äì –±–µ–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Kafka, Redis –∏ SQLite
- `kafdrop` ‚Äì –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è Kafka
- `kafka-ui` ‚Äì UI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Kafka

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

DynamoDBStream/
‚îÇ‚îÄ‚îÄ app/                  # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api.py            # API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ cache.py          # –†–∞–±–æ—Ç–∞ —Å Redis-–∫—ç—à–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ consumer.py       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Kafka (Consumer)
‚îÇ   ‚îú‚îÄ‚îÄ db.py             # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ producer.py       # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Kafka (Producer)
‚îÇ
‚îÇ‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ test_producer.py  # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Producer
‚îÇ
‚îÇ‚îÄ‚îÄ .env                  # –§–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ‚îÄ‚îÄ config.yaml           # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ‚îÄ‚îÄ docker-compose.yml    # –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
‚îÇ‚îÄ‚îÄ pytest.ini            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Pytest
‚îÇ‚îÄ‚îÄ README.md             # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ‚îÄ‚îÄ requirements.txt      # –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π


## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫  

### **1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/YOUR_USERNAME/DynamoDBStream.git
cd DynamoDBStream

2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt


3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ Kafka –∏ Redis —á–µ—Ä–µ–∑ Docker
docker-compose up -d


## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Kafka –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–ø–∏–∫–∏
- –î–∞–Ω–Ω—ã–µ Kafka —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `./kafka-data`
- API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite (`/data/database.sqlite`)
- –î–æ—Å—Ç—É–ø –∫ Kafka UI: `http://localhost:8080` (–ª–æ–≥–∏–Ω: `admin`, –ø–∞—Ä–æ–ª—å: `strongpassword123`)
- –î–æ—Å—Ç—É–ø –∫ Kafdrop: `http://localhost:9000`

## üì¨ API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
```
GET http://localhost:5000/latest-messages
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```
POST http://localhost:5000/send/
Content-Type: application/json

{
    "id": "12",
    "name": "Hello messages",
    "value": 111
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ ID
```
GET http://localhost:5000/record/12
```

5Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest tests/


üìú –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.